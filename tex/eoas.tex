\documentclass[class=llncs, crop=false]{standalone}

\input{preamble.tex}
\input{macros.tex}


\begin{document}
% ---------------------------------------------------------
\begin{boxfigure}[t!]{fig:eo-syntax}
	{Syntax for Eunoia}
	%
	$$ \eoTermSyntax $$
	\hrule
	$$ \eoAttrSyntax $$
	\hrule
	$$ \eoCommandSyntax $$
	% \hrule
	% $$ \eoPrfCommandSyntax $$
\end{boxfigure}
% ---------------------------------------------------------
With respect to a fixed set $𝒮_{\mbf{eo}}$ of \emph{symbols},
the rules in \autoref{fig:eo-syntax} define syntax for a
fragment of Eunoia.
%
In particular, we define sets of expressions
for \emph{terms}, \emph{parameters}, and \emph{attributes}.
%
Each term is either a symbol $s$ or an \emph{application}
$\eapp{s}{\vec t}$ for some list of terms $\vec t$.
%
% TODO. ref to explanation of variable attributes.
Let $ν$ and $α$ range over \emph{variable attributes}
and \emph{constant attributes} respectively.
%
Then, each \emph{parameter} $ρ$ consists of a symbol $s$,
a term $t$, and possibly a variable attribute $ν$.
%

Finally, the rules of \autoref{fig:eo-syntax}
define syntax for a subset of Eunoia's top-level commands,
which we will call \emph{standard commands}.
%
Hereinafter, a Eunoia \emph{signature} is a list $Δ$
of standard commands. We define some
`abstract syntax' for working with signatures below.

\subsubsection{Constant Declaration.}
%
Let $δ$ be a \emph{(parameterized) constant declaration}
with symbol $s$, parameters $\vec ρ$, and term $t$.
%
If $δ ∈ Δ$, then $\prn{\vec ρ.\, t}$ is called the
\emph{type} of $s$;
written $\prn{Δ ⊢ s : \prn{\vec ρ.\, t}}$.
%
If $δ$ provides a constant attribute $α$,
we write $\prn{Δ ⊢ s ∷ α}$.
%

\subsubsection{Macro Definition.}
%
Let $δ$ be a \emph{macro definition} with
symbol $s$, parameters $\vec ρ$, and term $t$.
%
If $δ ∈ Δ$, we call $\prn{\vec ρ.\, t}$
the \emph{definiens} of $s$;
written $\prn{Δ ⊢ s ≔ \prn{\vec ρ.\, t}}$.
%
If the attribute $\mtt{:type}\ t'$ is given by $δ$,
then $\prn{Δ ⊢ s : \prn{\vec ρ.\, t'}}$ also holds.

\subsubsection{Program Declaration.}
%
Let $δ$ be a \emph{program declaration} with
symbol $s$, parameters $\vec ρ$,
attribute $\mtt{:signature}\,\prn{\vec t}\,t'$,
and term-pairs $\vec r$.
%
If $δ ∈ Δ$ and $\vec t = \plur t n$,
we say that $s$ has \emph{domain} $(\plurcomma t n)$,
\emph{range} $t'$ and \emph{cases} $\vec r$
with respect to the parameters $\vec ρ$.
%
More formally, we write
  $\prn{Δ ⊢ s : \prn{\vec ρ.\,\earr{\plur t n\, t'}}}$
for the type of $s$,
and
  $\prn{Δ ⊢ s ≔ \mbf{cases}(\vec ρ.\ r_1, \ldots, r_n)}$
for the cases.
%
\subsubsection{Rule Declaration.}
%
Let $δ$ be a \emph{rule declaration} with symbol $s$,
parameters $\vec ρ$, and \emph{conclusion} $ψ$.
%
Suppose also that $δ$ provides attributes
$\mtt{:premises}\ \epar{\vec φ}$,
$\mtt{:args}\ \epar{\vec t}$,
and $\mtt{:requires}\ \epar{\vec r}$.
%
If $δ ∈ Δ$, then we may write:
  $$Δ ⊢ s : \prn{\vec ρ.\ \mbf{infer}(ψ ∣ \vec φ, \vec t, \vec r)}$$


\subsubsection{Signature Inclusion.}
%
We assume a \emph{(global) environment}
$Θ$ which maps filepaths to Eunoia signatures.
%
Thus, whenever $\epar{\mtt{include}\ μ} ∈ Δ$
for some path $μ$, the signature $Δ$ inherits
all of the declarations made by $Θ(μ)$.


\subsection{Elaboration of Eunoia Terms}

\subsection{Proof Scripts}
%
\begin{boxfigure}[t!]{fig:eo-prf-commands}
 {Syntax for Eunoia proof commands.}
 $$ \eoPrfCommandSyntax $$
\end{boxfigure}
%
\Autoref{fig:eo-prf-commands} provides syntax for two
basic forms of Eunoia \emph{proof commands}, which are
called  \emph{assumption} and \emph{step}.
%
Each \emph{proof script} $Π$ is a list
$\prn{\vec δ; \vec π}$ where
$\vec δ$ is a list of standard commands called
the \emph{preamble} and $\vec π$ are proof commands.
%

Given $\epar{\mtt{assume}\ s\ t} ∈ Π$,
we write $\prn{Π ⊢ s ≔ \hyp(t)}$.
%
Furthermore, let $π$ be a proof step with symbol $s$,
\emph{conclusion} $ψ$, and attributes $\mtt{:premises}\ \vec{φ}$
and $\mtt{:args}\ \vec{t}$.
%
Then we may write $\prn{Π ⊢ s ≔ \step(s', φ, \vec ψ, \vec t)}$
iff $π ∈ Π$.
% In practice, an Eunoia-friendly SMT solver will give
% its proofs with respect to some fixed signature $Δ$.
%
% We define We say that a proof scripts is \emph{valid} with respect
% to $Δ$ iff a list of
% commands of the form $\vec δ, \vec π$ proof commands.



\end{document}


% \subsection{Terms, Types and Attributes}
% %
% The \emph{built-in constants} of Eunoia are given by a fixed
% subset of symbols and denoted by the following expressions:
% $\mtt{Type}$ (the kind of all types),
% $\mtt{->}$ (arrow-type constructor),
% $\mtt{\_}$ (binary function application),
% $\mtt{Bool}$ (the type of Boolean values),
% $\mtt{true}$ and $\mtt{false}$ (terms of type \mtt{Bool}).
